<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>abdool-data-Application</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
</head>
<body class="font-sans bg-gray-100">

    <!-- Navbar -->
    <nav class="bg-blue-600 text-white p-4">
        <div class="max-w-screen-lg mx-auto flex justify-between items-center">
            <a href="#" class="text-xl font-semibold">abdool-data-Application</a>
        </div>
    </nav>

    <!-- Main Section -->
    <div class="max-w-screen-lg mx-auto p-8">
        <div id="register" class="hidden">
            <h2 class="text-2xl font-semibold mb-4">User Registration</h2>
            <form id="registerForm" class="space-y-4">
                <input type="text" id="username" placeholder="Enter your username" class="w-full px-4 py-2 border rounded">
                <input type="email" id="email" placeholder="Enter your email" class="w-full px-4 py-2 border rounded">
                <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded">Register</button>
            </form>
        </div>

        <div id="login" class="hidden">
            <h2 class="text-2xl font-semibold mb-4">Login</h2>
            <form id="loginForm" class="space-y-4">
                <input type="email" id="loginEmail" placeholder="Enter your email" class="w-full px-4 py-2 border rounded">
                <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded">Login</button>
            </form>
        </div>

        <div id="emailVerification" class="hidden">
            <h2 class="text-2xl font-semibold mb-4">Email Verification</h2>
            <button id="verifyEmailButton" class="w-full bg-blue-600 text-white py-2 rounded">Verify Email</button>
        </div>

        <div id="upload" class="hidden">
            <h2 class="text-2xl font-semibold mb-4">Upload Dataset</h2>
            <form onsubmit="event.preventDefault(); uploadData()" class="space-y-4">
                <input type="file" accept=".csv,.json" required class="w-full px-4 py-2 border rounded">
                <button type="submit" class="w-full bg-green-600 text-white py-2 rounded">Upload</button>
            </form>
        </div>

        <div id="payment" class="hidden">
            <h2 class="text-2xl font-semibold mb-4">Payment</h2>
            <form id="paymentForm" class="space-y-4">
                <input type="number" id="amount" placeholder="Enter amount to pay (NGN)" class="w-full px-4 py-2 border rounded">
                <button type="submit" class="w-full bg-yellow-500 text-white py-2 rounded">Pay Now</button>
            </form>
        </div>

        <div id="dashboard" class="hidden">
            <h2 class="text-2xl font-semibold mb-4">Dashboard</h2>
            <div class="space-y-4">
                <div id="status" class="text-lg">No data uploaded yet.</div>
                <button onclick="logout()" class="w-full bg-red-600 text-white py-2 rounded">Logout</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white p-4">
        <div class="text-center">
            <p>Contact us at: <span class="font-semibold">07065631640</span></p>
        </div>
    </footer>

    <script>
        let userData = null;

        // Simulated registration function
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            userData = {
                username: document.getElementById('username').value,
                email: document.getElementById('email').value,
            };
            alert('Registration successful! Please verify your email.');
            showSection('emailVerification');
        });

        // Simulated login function
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            if (userData && userData.email === document.getElementById('loginEmail').value) {
                showSection('upload');
            } else {
                alert('Invalid email!');
            }
        });

        // Simulate email verification
        document.getElementById('verifyEmailButton').addEventListener('click', function() {
            alert('Email verified successfully!');
            showSection('upload');
        });

        // Upload data
        function uploadData() {
            document.getElementById('status').innerText = 'Data has been uploaded!';
            showSection('dashboard');
        }

        // Paystack Payment Integration
        document.getElementById('paymentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const amount = document.getElementById('amount').value * 100; // Paystack expects kobo
            payWithPaystack(amount);
        });

        function payWithPaystack(amount) {
            var handler = PaystackPop.setup({
                key: 'pk_test_yourpaystackpublickey', // pk_live_fefa4cab21e99bd551e0979a445038b389d9cfea
                email: userData.email,
                amount: amount,
                currency: 'NGN',
                callback: function(response) {
                    alert('Payment successful! Payment reference: ' + response.reference);
                    showSection('dashboard');
                },
                onClose: function() {
                    alert('Payment window closed.');
                }
            });
            handler.openIframe();
        }

        // Show specific section
        function showSection(section) {
            const sections = ['register', 'login', 'emailVerification', 'upload', 'payment', 'dashboard'];
            sections.forEach(sec => document.getElementById(sec).classList.add('hidden'));
            document.getElementById(section).classList.remove('hidden');
        }

        // Logout
        function logout() {
            userData = null;
            showSection('login');
        }

        // Start the app with login page
        showSection('login');
    </script>
</body>
</html>
